<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>
<html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>
<html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tiered Storage on Tachyon - Tachyon 0.9.0-SNAPSHOT Documentation</title>
    <meta name="description" content="">

    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
    <link rel="stylesheet" href="../css/main.css">

    <script src="../js/vendor/modernizr-2.6.1-respond-1.1.0.min.js"></script>

    <link rel="stylesheet" href="../css/pygments-default.css">

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-47563775-2', 'tachyon-project.org');
        ga('send', 'pageview');
    </script>
</head>
<body>
<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade
    your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install
    Google Chrome Frame</a> to better experience this site.</p>
<![endif]-->

<!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

<div class="navbar navbar-fixed-top" id="topbar">
    <div class="navbar-inner">
        <div class="container">
            <a href="index.html">
                <div class="brand" style="display:table;">
                    <div style="position:relative;display:table-cell;vertical-align:middle;">
                        <img src="../img/logo-white.png" alt="Tachyon Logo" style="height:34px;"/>
                        <div style="position:absolute;right:0;top:30px;text-shadow:none;">
                            <span class="version">0.9.0-SNAPSHOT</span>
                        </div>
                    </div>
                </div>
            </a>
            <ul class="nav">
                
                    
                    <!-- overviewPage only has one element -->
                    <li><a href="index.html">Overview</a></li>
                

                
                
                    <li class="dropdown">
                        
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">User Guide<b
                                class="caret"></b></a>
                        

                        <ul class="dropdown-menu">
                            
                            
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Getting-Started.html">
                                        
                                            Getting Started
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Architecture.html">
                                        
                                            Architecture Overview
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-Locally.html">
                                        
                                            Tachyon on Local Machine
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-on-Virtual-Box.html">
                                        
                                            Tachyon on Virtual Box
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-on-a-Cluster.html">
                                        
                                            Tachyon Standalone on a Cluster
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-Fault-Tolerant.html">
                                        
                                            Tachyon Standalone with Fault Tolerance
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-on-EC2.html">
                                        
                                            Tachyon on EC2
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-on-EC2-Mesos.html">
                                        
                                            Tachyon on EC2 with Mesos
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-Fault-Tolerant-on-EC2.html">
                                        
                                            Tachyon on EC2 with Fault Tolerance
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Tachyon-on-EC2-Yarn.html">
                                        
                                            Tachyon on EC2 with YARN
                                        
                                    </a></li>
                                
                            
                            
                        </ul>
                    </li>
                
                    <li class="dropdown">
                        
                            <a href="#" class="dropdown-toggle active" data-toggle="dropdown">Features<b
                                class="caret"></b></a>
                        

                        <ul class="dropdown-menu">
                            
                            
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Command-Line-Interface.html">
                                        
                                            Command Line Interface
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Configuration-Settings.html">
                                        
                                            Configuration Settings
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/File-System-API.html">
                                        
                                            Filesystem API
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Lineage-API.html">
                                        
                                            Lineage API
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Metrics-System.html">
                                        
                                            Metrics System
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Mounting-Tachyon-FS-with-FUSE.html">
                                        
                                            Tachyon-FUSE
                                        
                                    </a></li>
                                
                            
                                
                                    <li class="active">
                                        <a>
                                            
                                                Tiered Storage
                                            
                                        </a>
                                    </li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Unified-and-Transparent-Namespace.html">
                                        
                                            Unified Namespace
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Web-Interface.html">
                                        
                                            Web Interface
                                        
                                    </a></li>
                                
                            
                            
                        </ul>
                    </li>
                
                    <li class="dropdown">
                        
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Frameworks<b
                                class="caret"></b></a>
                        

                        <ul class="dropdown-menu">
                            
                            
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Spark-on-Tachyon.html">
                                        
                                            Apache Spark
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Hadoop-MapReduce-on-Tachyon.html">
                                        
                                            Apache Hadoop MapReduce
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Running-Flink-on-Tachyon.html">
                                        
                                            Apache Flink
                                        
                                    </a></li>
                                
                            
                            
                        </ul>
                    </li>
                
                    <li class="dropdown">
                        
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Under Stores<b
                                class="caret"></b></a>
                        

                        <ul class="dropdown-menu">
                            
                            
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Configuring-Tachyon-with-S3.html">
                                        
                                            Tachyon with S3
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Configuring-Tachyon-with-Swift.html">
                                        
                                            Tachyon with Swift
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Configuring-Tachyon-with-GlusterFS.html">
                                        
                                            Tachyon with GlusterFS
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Configuring-Tachyon-with-HDFS.html">
                                        
                                            Tachyon with HDFS
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Configuring-Tachyon-with-OSS.html">
                                        
                                            Tachyon with OSS
                                        
                                    </a></li>
                                
                            
                            
                        </ul>
                    </li>
                
                    <li class="dropdown">
                        
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dev Resources<b
                                class="caret"></b></a>
                        

                        <ul class="dropdown-menu">
                            
                            
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Building-Tachyon-Master-Branch.html">
                                        
                                            Building Master Branch
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Contributing-to-Tachyon.html">
                                        
                                            Contributor Guide
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Developer-Tips.html">
                                        
                                            Developer Tips
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Integrating-Under-Storage-Systems.html">
                                        
                                            Integrating Under Storage Systems
                                        
                                    </a></li>
                                
                            
                                
                                    <!-- Use the prefix .. to change the absulote url to relative url -->
                                    <li><a href="../en/Powered-By-Tachyon.html">
                                        
                                            Powered By Tachyon
                                        
                                    </a></li>
                                
                            
                            
                                <li><a href="https://tachyon.atlassian.net/browse/TACHYON">Reporting Issues (JIRA)</a></li>
                                <li class="divider"></li>
                                <li><p>Presentations</p></li>
                                <li><a href="http://goo.gl/kcKeTp">Strata and Hadoop World 2015</a></li>
                                <li><a href="http://goo.gl/0HpqeS">Tachyon Workshop 2015</a></li>
                                <li><a href="http://goo.gl/fP9qkF">Strata and Hadoop World 2014</a></li>
                                <li><a href="http://goo.gl/DKrE4M">Spark Summit 2014</a></li>
                                <li><a href="http://goo.gl/AHgz0E">Strata and Hadoop World 2013</a></li>
                            
                        </ul>
                    </li>
                

                <!-- Generator the language selector at the right of the navigation bar -->
                
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">English<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                            <!-- Use the prefix .. to change the absulote url to relative url -->
                            <li><a href="../en/Tiered-Storage-on-Tachyon.html">English</a></li>
                        
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</div>

<div class="container" id="content">
    <h1 class="title">Tiered Storage on Tachyon</h1>
    
    <ul id="markdown-toc">
  <li><a href="#using-tiered-storage" id="markdown-toc-using-tiered-storage">Using Tiered Storage</a>    <ul>
      <li><a href="#storage-directories" id="markdown-toc-storage-directories">Storage Directories</a></li>
      <li><a href="#writing-data" id="markdown-toc-writing-data">Writing Data</a></li>
      <li><a href="#reading-data" id="markdown-toc-reading-data">Reading Data</a>        <ul>
          <li><a href="#pinning-files" id="markdown-toc-pinning-files">Pinning Files</a></li>
        </ul>
      </li>
      <li><a href="#allocators" id="markdown-toc-allocators">Allocators</a></li>
      <li><a href="#evictors" id="markdown-toc-evictors">Evictors</a></li>
      <li><a href="#space-reserver" id="markdown-toc-space-reserver">Space Reserver</a></li>
    </ul>
  </li>
  <li><a href="#enabling-and-configuring-tiered-storage" id="markdown-toc-enabling-and-configuring-tiered-storage">Enabling and Configuring Tiered Storage</a></li>
  <li><a href="#configuration-parameters-for-tiered-storage" id="markdown-toc-configuration-parameters-for-tiered-storage">Configuration Parameters For Tiered Storage</a></li>
</ul>

<p>Tachyon supports tiered storage, which allows Tachyon to manage other storage types in addition to
memory. Currently, Tachyon Tiered Storage supports these storage types or tiers:</p>

<ul>
  <li>MEM (Memory)</li>
  <li>SSD (Solid State Drives)</li>
  <li>HDD (Hard Disk Drives)</li>
</ul>

<p>Using Tachyon with tiered storage allows Tachyon to store more data in the system at once,
since memory capacity may be limited in some deployments. With tiered storage, Tachyon
automatically manages blocks between all the configured tiers, so users and administrators do not
have to manually manage the locations of the data. Users may specify their own data management
strategies by implementing <a href="#allocators">allocators</a> and <a href="#evictors">evictors</a>. In addition, manual
control over tier storage is possible, see <a href="#pinning-files">pinning files</a>.</p>

<h1 id="using-tiered-storage">Using Tiered Storage</h1>

<p>With the introduction of tiers, the data blocks managed by Tachyon are not necessarily in memory;
blocks can be in any of the available tiers. To manage the placement and movement of the blocks,
Tachyon uses <em>allocators</em> and <em>evictors</em> to place and re-arrange blocks between the tiers. Tachyon
assumes that tiers are ordered from top to bottom based on I/O performance. Therefore, the typical
tiered storage configuration defines the top tier to be MEM, followed by SSD, and finally HDD.</p>

<h2 id="storage-directories">Storage Directories</h2>

<p>A tier is made up of at least one storage directory. This directory is a file path where the Tachyon
blocks should be stored. Tachyon supports configuring multiple directories for a single tier,
allowing multiple mount points or storage devices for a particular tier. For example, if you have
five SSD devices on your Tachyon worker, you can configure Tachyon to use all five devices for the
SSD tier. Configuration for this is described <a href="#enabling-and-configuring-tiered-storage">below</a>.
Choosing which directory the data should placed is determined by the <a href="#allocators">allocators</a>.</p>

<h2 id="writing-data">Writing Data</h2>

<p>When a user writes a new block, it is written to the top tier by default (a custom allocator can be
used if the default behavior is not desired). If there is not enough space for the block in the top
tier, then the evictor is triggered in order to free space for the new block.</p>

<h2 id="reading-data">Reading Data</h2>

<p>Reading a data block with tiered storage is similar to standard Tachyon. Tachyon will simply read
the block from where it is already stored. If Tachyon is configured with multiple tiers, then the
block will not be necessarily read from the top tier, since it could have been moved to a lower tier
transparently.</p>

<p>Reading data with the TachyonStorageType.PROMOTE will ensure the data is first transferred to the
top tier before it is read from the worker. This can also be used as a data management strategy by
explicitly moving hot data to higher tiers.</p>

<h3 id="pinning-files">Pinning Files</h3>

<p>Another way for a user to control the placement and movement of their files is to <em>pin</em> and <em>unpin</em>
files. When a file is pinned, its blocks will not be evicted. However, users can still promote
blocks of pinned files to move blocks to the top tier.</p>

<p>An example of how to pin a file:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">TachyonFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">TachyonFileSystem</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="s">"/myFile"</span><span class="o">);</span>
<span class="n">SetStateOptions</span> <span class="n">pinOpt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SetStateOptions</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">ClientContext</span><span class="o">.</span><span class="na">getConf</span><span class="o">()).</span><span class="na">setPinned</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="n">TachyonFileSystem</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">pinOpt</span><span class="o">);</span>
</code></pre>
</div>

<p>Similarly, the file can be unpinned through:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">TachyonFile</span> <span class="n">file</span> <span class="o">=</span> <span class="n">TachyonFileSystem</span><span class="o">.</span><span class="na">open</span><span class="o">(</span><span class="s">"/myFile"</span><span class="o">);</span>
<span class="n">SetStateOptions</span> <span class="n">pinOpt</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SetStateOptions</span><span class="o">.</span><span class="na">Builder</span><span class="o">(</span><span class="n">ClientContext</span><span class="o">.</span><span class="na">getConf</span><span class="o">()).</span><span class="na">setPinned</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
<span class="n">TachyonFileSystem</span><span class="o">.</span><span class="na">setState</span><span class="o">(</span><span class="n">file</span><span class="o">,</span> <span class="n">pinOpt</span><span class="o">);</span>
</code></pre>
</div>

<p>Since blocks of pinned files are no longer candidates for eviction, clients should make sure to
unpin files when appropriate.</p>

<h2 id="allocators">Allocators</h2>

<p>Tachyon uses allocators for choosing locations for writing new blocks. Tachyon has a framework for
customized allocators, but there are a few default implementations of allocators. Here are the
existing allocators in Tachyon:</p>

<ul>
  <li>
    <p><strong>GreedyAllocator</strong></p>

    <p>Allocates the new block to the first storage directory that has sufficient space.</p>
  </li>
  <li>
    <p><strong>MaxFreeAllocator</strong></p>

    <p>Allocates the block in the storage directory with most free space.</p>
  </li>
  <li>
    <p><strong>RoundRobinAllocator</strong></p>

    <p>Allocates the block in the highest tier with space, the storage directory is chosen through
  round robin.</p>
  </li>
</ul>

<p>In the future, additional allocators will be available. Since Tachyon supports custom allocators,
you can also develop your own allocator appropriate for your workload.</p>

<h2 id="evictors">Evictors</h2>

<p>Tachyon uses evictors for deciding which blocks to move to a lower tier, when space needs to be
freed. Tachyon supports custom evictors, and implementations include:</p>

<ul>
  <li>
    <p><strong>GreedyEvictor</strong></p>

    <p>Evicts arbitrary blocks until the required size is freed.</p>
  </li>
  <li>
    <p><strong>LRUEvictor</strong></p>

    <p>Evicts the least-recently-used blocks until the required size is freed.</p>
  </li>
  <li>
    <p><strong>LRFUEvictor</strong></p>

    <p>Evicts blocks based on least-recently-used and least-frequently-used with a configurable weight.
  If the weight is completely biased toward least-recently-used, the behavior will be the same as
  the LRUEvictor.</p>
  </li>
  <li>
    <p><strong>PartialLRUEvictor</strong></p>

    <p>Evicts based on least-recently-used but will choose StorageDir with maximum free space and
  only evict from that StorageDir.</p>
  </li>
</ul>

<p>In the future, additional evictors will be available. Since Tachyon supports custom evictors,
you can also develop your own evictor appropriate for your workload.</p>

<p>When using synchronous eviction, it is recommended to use small block size (around 64MB),
to reduce the latency of block eviction. When using the <a href="#space-reserver">space reserver</a>, block
size does not affect eviction latency.</p>

<h2 id="space-reserver">Space Reserver</h2>

<p>Space reserver makes tiered storage try to reserve certain portion of space on each storage layer
before all space on any given layer is consumed. It will improve the performance of bursty write,
but may also provide marginal performance gain for continuous writes when eviction is continually
running. See the <a href="#enabling-and-configuring-tiered-storage">configuration section</a> for how to enable
and configure the space reserver.</p>

<h1 id="enabling-and-configuring-tiered-storage">Enabling and Configuring Tiered Storage</h1>

<p>Tiered storage can be enabled in Tachyon using
<a href="Configuration-Settings.html">configuration parameters</a>. By default, Tachyon only enables a single,
memory tier. To specify additional tiers for Tachyon, use the following configuration parameters:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>tachyon.worker.tieredstore.level.max
tachyon.worker.tieredstore.level{x}.alias
tachyon.worker.tieredstore.level{x}.dirs.quota
tachyon.worker.tieredstore.level{x}.dirs.path
tachyon.worker.tieredstore.level{x}.reserved.ratio
</code></pre>
</div>

<p>For example, if you wanted to configure Tachyon to have two tiers – memory and hard disk drive –
you could use a configuration similar to:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>tachyon.worker.tieredstore.level.max=2
tachyon.worker.tieredstore.level0.alias=MEM
tachyon.worker.tieredstore.level0.dirs.path=/mnt/ramdisk
tachyon.worker.tieredstore.level0.dirs.quota=100GB
tachyon.worker.tieredstore.level0.reserved.ratio=0.2
tachyon.worker.tieredstore.level1.alias=HDD
tachyon.worker.tieredstore.level1.dirs.path=/mnt/hdd1,/mnt/hdd2,/mnt/hdd3
tachyon.worker.tieredstore.level1.dirs.quota=2TB,5TB,500GB
tachyon.worker.tieredstore.level1.reserved.ratio=0.1
</code></pre>
</div>

<p>Here is the explanation of the example configuration:</p>

<ul>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level.max=2</code> configures 2 tiers in Tachyon</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level0.alias=MEM</code> configures the first (top) tier to be a memory tier</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level0.dirs.path=/mnt/ramdisk</code> defines <code class="highlighter-rouge">/mnt/ramdisk</code> to be the file
path to the first tier</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level0.dirs.quota=100GB</code> sets the quota for the ramdisk to be <code class="highlighter-rouge">100GB</code></li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level0.reserved.ratio=0.2</code> sets the ratio of space to be reserved on
top layer to be 0.2</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level1.alias=HDD</code> configures the second tier to be a hard disk drive tier</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level1.dirs.path=/mnt/hdd1,/mnt/hdd2,/mnt/hdd3</code> configures 3 separate
file paths for the second tier</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level1.dirs.quota=2TB,5TB,500GB</code> defines the quota for each of the 3
file paths of the second tier</li>
  <li><code class="highlighter-rouge">tachyon.worker.tieredstore.level1.reserved.ratio=0.1</code> sets the ratio of space to be reserved on
the second layer to be 0.1</li>
</ul>

<p>There are a few restrictions to defining the tiers. First of all, there can be at most 3 tiers.
Also, at most 1 tier can refer to a specific alias. For example, at most 1 tier can have the 
alias HDD. If you want Tachyon to use multiple hard drives for the HDD tier, you can configure that 
by using multiple paths for <code class="highlighter-rouge">tachyon.worker.tieredstore.level{x}.dirs.path</code>.</p>

<p>Additionally, the specific evictor and allocator strategies can be configured. Those configuration
parameters are:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>tachyon.worker.allocator.class=tachyon.worker.block.allocator.MaxFreeAllocator
tachyon.worker.evictor.class=tachyon.worker.block.evictor.LRUEvictor
</code></pre>
</div>

<p>Space reserver can be configured to be enabled or disabled through:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>tachyon.worker.tieredstore.reserver.enabled=false
</code></pre>
</div>

<h1 id="configuration-parameters-for-tiered-storage">Configuration Parameters For Tiered Storage</h1>

<p>These are the configuration parameters for tiered storage.</p>

<table class="table table-striped">
<tr><th>Parameter</th><th>Default Value</th><th>Description</th></tr>
<tr>
  <td>tachyon.worker.tieredstore.level.max</td>
  <td>1</td>
  <td>
  The maximum number of storage tiers in Tachyon. Currently, Tachyon supports 1, 2, or 3 tiers.
  </td>
</tr>
<tr>
  <td>tachyon.worker.tieredstore.level{x}.alias</td>
  <td>MEM
  <div>(for tachyon.worker.tieredstore.</div>
  <div>level0.alias)</div></td>
  <td>
  The alias of each storage tier, where x represents storage tier number (top tier is 0). Currently,
  there are 3 aliases, MEM, SSD, and HDD.
  </td>
</tr>
<tr>
  <td>tachyon.worker.tieredstore.level{x}.dirs.path</td>
  <td>/mnt/ramdisk
  <div>(for tachyon.worker.tieredstore.</div>
  <div>level0.dirs.path)</div></td>
  <td>
  The paths of storage directories in storage tier x, delimited by comma. x represents the storage
  tier number (top tier is 0). It is suggested to have one storage directory per hardware device for
  the SSD and HDD tiers.
  </td>
</tr>
<tr>
  <td>tachyon.worker.tieredstore.level{x}.dirs.quota</td>
  <td>128MB
  <div>(for tachyon.worker.tieredstore.</div>
  <div>level0.dirs.quota)</div></td>
  <td>
  The quotas for all storage directories in storage tier x, delimited by comma. x represents the
  storage tier number (starting from 0). For a particular storage tier, if the list of quotas is
  shorter than the list of directories of that tier, then the quotas for the remaining directories
  will just use the last-defined quota. Quota definitions use these suffixes: KB, MB, GB, TB, PB.
  </td>
</tr>
<tr>
  <td>tachyon.worker.tieredstore.level{x}.reserved.ratio</td>
  <td>0.1</td>
  <td>
  Value is between 0 and 1, it sets the portion of space reserved on storage tier x. If the space is
  unavailable, the space reserver will evict blocks until the reserved space is available again.
  </td>
</tr>
<tr>
  <td>tachyon.worker.tieredstore.reserver.enabled</td>
  <td>false</td>
  <td>
  Flag for enabling the space reserver service.
  </td>
</tr>
<tr>
  <td>tachyon.worker.tieredstore.reserver.interval.ms</td>
  <td>1000</td>
  <td>
  Interval for the space reserver to check if enough space is reserved in all tiers.
  </td>
</tr>
<tr>
  <td>tachyon.worker.allocator.class</td>
  <td><div>tachyon.worker.block.allocator.</div><div>MaxFreeAllocator</div></td>
  <td>
  The class name of the allocation strategy to use for new blocks in Tachyon.
  </td>
</tr>
<tr>
  <td>tachyon.worker.evictor.class</td>
  <td><div>tachyon.worker.block.evictor.</div>
  <div>LRUEvictor</div></td>
  <td>
  The class name of the block eviction strategy to use when a storage layer runs out of space.
  </td>
</tr>
</table>

    <!-- Main hero unit for a primary marketing message or call to action -->
    <!--<div class="hero-unit">
        <h1>Hello, world!</h1>
        <p>This is a template for a simple marketing or informational website. It includes a large callout called the hero unit and three supporting pieces of content. Use it as a starting point to create something more unique.</p>
        <p><a class="btn btn-primary btn-large">Learn more &raquo;</a></p>
            </div>-->

    <!-- Example row of columns -->
    <!--<div class="row">
        <div class="span4">
            <h2>Heading</h2>
            <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
            <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec id elit non mi porta gravida at eget metus. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus. Etiam porta sem malesuada magna mollis euismod. Donec sed odio dui. </p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
               </div>
                <div class="span4">
                    <h2>Heading</h2>
                    <p>Donec sed odio dui. Cras justo odio, dapibus ac facilisis in, egestas eget quam. Vestibulum id ligula porta felis euismod semper. Fusce dapibus, tellus ac cursus commodo, tortor mauris condimentum nibh, ut fermentum massa justo sit amet risus.</p>
                    <p><a class="btn" href="#">View details &raquo;</a></p>
                </div>
            </div>

            <hr>-->

    <footer>
        <hr>
        <p style="text-align: center; veritcal-align: middle; color: #999;">
            Tachyon is being developed by a <a href="https://github.com/amplab/tachyon/graphs/contributors">large community</a>.
        </p>
    </footer>

</div>
<!-- /container -->

<script src="../js/vendor/jquery-1.8.0.min.js"></script>
<script src="../js/vendor/bootstrap.min.js"></script>
<script src="../js/main.js"></script>

<!-- A script to fix internal hash links because we have an overlapping top bar.
     Based on https://github.com/twitter/bootstrap/issues/193#issuecomment-2281510 -->
<script>
    $(function () {
        function maybeScrollToHash() {
            if (window.location.hash && $(window.location.hash).length) {
                var newTop = $(window.location.hash).offset().top - $('#topbar').height() - 5;
                $(window).scrollTop(newTop);
            }
        }

        $(window).bind('hashchange', function () {
            maybeScrollToHash();
        });
        // Scroll now too in case we had opened the page on a hash, but wait 1 ms because some browsers
        // will try to do *their* initial scroll after running the onReady handler.
        setTimeout(function () {
            maybeScrollToHash();
        }, 1)
    })
</script>

<script src="../js/scrollspy.js"></script>

</body>
</html>
